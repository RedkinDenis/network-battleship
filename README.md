# Морской бой (Network Battleship)

Сетевая реализация классической игры "Морской бой" с использованием Qt6.

## Описание проекта

Проект представляет собой клиент-серверное приложение для игры в "Морской бой" по сети. Игра реализована с использованием фреймворка Qt6 и следует архитектуре MVC (Model-View-Controller).

### Основные компоненты

#### Клиентская часть
- **Model** (`client/model.hpp`, `client/model.cpp`)
  - Управляет состоянием игры
  - Хранит информацию о полях игроков
  - Обрабатывает игровую логику
  - Состояния: ST_GAME_NSTARTED, ST_PLACING_SHIPS, ST_WAITING_PLACING, ST_MAKING_STEP, ST_WAITING_STEP, ST_GAME_FINISHED

- **Controller** (`client/controller.hpp`, `client/controller.cpp`)
  - Обрабатывает пользовательский ввод
  - Управляет звуковыми эффектами
  - Координирует взаимодействие между Model и View
  - Обрабатывает сетевые сообщения

- **Field** (`client/field.hpp`, `client/field.cpp`)
  - Управляет состоянием игрового поля
  - Проверяет корректность размещения кораблей
  - Обрабатывает выстрелы
  - Поддерживает различные состояния ячеек (пустая, корабль, подбитый, уничтоженный)

#### Серверная часть
- **Server** (`server/server.hpp`, `server/server.cpp`)
  - Управляет подключениями клиентов
  - Обрабатывает авторизацию
  - Координирует игровой процесс
  - Состояния: ST_NSTARTED, ST_PLACING, ST_STARTED_STEP, ST_ACCEPTED_STEP, ST_FINISHED

- **Client** (`server/client.hpp`, `server/client.cpp`)
  - Хранит информацию о подключенном игроке
  - Управляет состоянием клиента
  - Обрабатывает игровое поле
  - Состояния: ST_DISCONNECTED, ST_CONNECTED, ST_AUTHORIZED

- **GameController** (`server/gamecontroller.hpp`, `server/gamecontroller.cpp`)
  - Управляет игровым процессом между двумя игроками
  - Контролирует ходы
  - Проверяет условия победы
  - Хранит состояние игры

### Игровой процесс

1. **Подключение и авторизация**
   - Клиент подключается к серверу
   - Происходит авторизация с использованием логина
   - Сервер проверяет уникальность логина

2. **Размещение кораблей**
   - Игроки размещают корабли на своих полях
   - Проверяется корректность размещения
   - Корабли не должны соприкасаться
   - Количество кораблей каждого типа должно соответствовать правилам

3. **Игровой процесс**
   - Игроки по очереди делают ходы
   - Выстрелы обрабатываются и отображаются на полях
   - Проверяется уничтожение кораблей
   - Определяется победитель

4. **Завершение игры**
   - Игра завершается при уничтожении всех кораблей одного из игроков
   - Результаты сохраняются в базе данных
   - Игроки могут начать новую игру

### Звуковые эффекты

Игра включает следующие звуковые эффекты:
- Фоновая музыка
- Звуки выстрелов (попадание/промах)
- Звуки уничтожения кораблей
- Звуки интерфейса
- Звуки уведомлений

### Сетевой протокол

Используется текстовый протокол с разделителем "@". Основные команды:
- `LOGIN:<login>` - авторизация
- `GAME:<gameId>:<login>:SHOT:<x>:<y>` - выстрел
- `GAME:<gameId>:<login>:FIELD:<field>` - передача поля
- `GAME:<gameId>:<login>:RESULT:<result>` - результат выстрела

## Требования

- Qt6
- C++17
- CMake 3.16+
- Doxygen (для генерации документации)

## Сборка

```bash
mkdir build
cd build
cmake ..
make
```

## Запуск

1. Запустите сервер:
```bash
./server/server
```

2. Запустите клиенты:
```bash
./client/client
```

## Генерация документации

Проект использует Doxygen для генерации документации. Для создания документации выполните следующие шаги:

1. Установите Doxygen:
```bash
sudo apt-get install doxygen
```

2. Сгенерируйте документацию:
```bash
doxygen Doxyfile
```

3. Откройте документацию:
```bash
xdg-open doc/html/index.html
```

Документация будет сгенерирована в директории `doc/html/` и будет включать:
- Описание всех классов и их методов
- Диаграммы классов
- Исходный код с подсветкой синтаксиса
- Индекс всех компонентов
- Поиск по документации

### Структура документации

- **Главная страница** - общее описание проекта
- **Классы** - документация всех классов проекта
- **Файлы** - список всех файлов с их описанием
- **Диаграммы** - визуальное представление связей между классами
- **Примеры** - примеры использования компонентов
- **Страницы** - дополнительная информация о проекте

## Лицензия

MIT License
